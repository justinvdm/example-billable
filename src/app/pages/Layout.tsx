import type { AppContext } from "@/worker";

import { link } from "@/app/shared/links";

function Logo() {
  return (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      id="svg"
      version="1.1"
      width="auto"
      height="28"
      viewBox="66.43 78.77 250.78 88.62"
    >
      <g id="svgg">
        <path
          id="path0"
          fill="#040404"
          fillRule="evenodd"
          stroke="none"
          d="M101.562 79.011c-.191.038-1.128.194-2.083.348-5.505.887-11.817 4.112-16.252 8.305-1.05.991-2.339 2.022-2.865 2.289-1.393.708-2.225 1.648-2.715 3.068-.238.689-1.035 2.19-1.77 3.335-4.578 7.13-7.656 15.273-9.15 24.211-1.375 8.223 2.665 17.591 8.64 20.035.943.386 1.01.48 1.455 2.024 4.422 15.343 14.593 23.92 29.135 24.572 15.991.717 27.572-8.516 27.632-22.027.051-11.466-10.614-20.284-26.539-21.946l-2.567-.268 2.381-2.532c13.181-14.018 17.294-24.719 12.797-33.296-2.804-5.351-11.749-9.362-18.099-8.118m2.241 7.78c7.284 2.726 7.502 12.805.493 22.738-3.31 4.691-15.759 15.861-17.677 15.861-.728 0 .48-22.093 1.403-25.656 2.408-9.292 9.654-15.235 15.781-12.943m134.911 9.536c-6.164 2.536-7.079 4.037-7.699 12.638-1.334 18.481-1.063 31.868.838 41.406.923 4.636.542 7.317-1.167 8.201-1.763.912-2.511-1.006-3.375-8.659-2.186-19.344-2.737-22.504-3.994-22.919-2.713-.896-8.299 1.236-8.745 3.337l-.235 1.105-.57-.607c-1.471-1.566-6.076-3.068-8.562-2.793-10.575 1.168-16.361 15.252-11.865 28.88.662 2.005.569 2.323-.905 3.085-3.998 2.067-5.716-2.465-7.006-18.492-.578-7.172-.583-7.119.933-9.258 6.059-8.553 8.748-16.56 8.36-24.904-.723-15.581-14.059-14.936-19.082.924-2.893 9.135-3.348 25.123-1.176 41.295.702 5.22-.314 8.433-3.235 10.236-4.39 2.71-6.435-3.48-7.563-22.887l-.157-2.703 1.391-1.926c8.653-11.986 11.068-26.636 5.588-33.894-3.54-4.69-10.772-2.028-14.483 5.33-4.808 9.536-5.82 32.27-2.245 50.435.404 2.057.158 2.612-1.468 3.305-4.791 2.041-6.734-4.522-6.495-21.936l.111-8.09-.547-.358c-1.292-.847-6.664.268-9.076 1.884-1.372.92-1.38.969-1.395 9.153-.04 20.847 4.156 30.456 12.372 28.33 2.615-.677 5.597-3.082 7.189-5.798l.63-1.075.368.896c3.524 8.58 13.506 8.372 19.673-.409l1.138-1.62.268.996c2.113 7.848 10.979 9.751 17.364 3.727l1.573-1.484 1.546 1.639c4.843 5.134 12.939 4.591 19.053-1.277l2.268-2.178.898 1.536c3.944 6.749 10.384 6.808 14.656.134l1.078-1.683.88 1.278c3.236 4.699 7.985 6.745 12.92 5.566 6.49-1.55 9.976-6.14 12.059-15.877.07-.331.663-1.268 1.316-2.082a56 56 0 0 0 2.13-2.863l.942-1.381.518 4.042c1.561 12.175 3.548 16.179 8.837 17.812 3.667 1.133 7.248.08 10.662-3.136l1.527-1.439 1.443 1.309c7.684 6.97 18.294 5.286 24.884-3.948 4.178-5.856 5.404-15.196 2.619-19.949-1.243-2.121-2.668-2.296-2.367-.292.605 4.043.65 4.777.403 6.612-1.422 10.57-11.631 16.893-17.614 10.91-1.781-1.781-1.807-1.933-.477-2.786 2.508-1.609 6.284-6.282 7.743-9.581 5.285-11.949-3.41-21.373-13.672-14.819-7.804 4.986-10.634 18.605-5.895 28.378l.895 1.846-.716.437c-4.063 2.477-5.886-2.183-7.19-18.377-.577-7.172-.583-7.119.933-9.258 3.385-4.777 5.062-8.017 6.676-12.894 3.992-12.062.79-24.114-6.164-23.205-10.054 1.313-14.566 14.668-13.604 40.266l.106 2.815-1.607 2.391-1.607 2.39-.152-2.082c-.475-6.538-3.293-11.871-7.025-13.297-4.362-1.666-9.368-.14-12.257 3.738-1.827 2.452-2.204 1.599-2.371-5.363-.126-5.257.054-8.689 1.131-21.654.886-10.657.968-10.314-2.156-9.029m-71.277 4.427c2.589 3.141 2.35 12.079-.562 21.051-1.072 3.302-3.251 6.978-3.806 6.423-.74-.74-.845-19.522-.128-22.849 1.026-4.761 2.843-6.63 4.496-4.625m21.343-.153c3.602 3.602 1.261 22.006-3.44 27.049l-.805.864-.185-.81c-.433-1.906-.748-13.647-.467-17.444.607-8.2 2.541-12.015 4.897-9.659m91.382 0c3.602 3.602 1.261 22.006-3.44 27.049l-.805.864-.184-.81c-.434-1.906-.748-13.647-.467-17.444.606-8.2 2.54-12.015 4.896-9.659m-139.408 5.454c-2.505 1.091-4.574 5.328-4.583 9.387-.017 7.632 5.779 9.348 8.988 2.661 3.107-6.477.318-14.104-4.405-12.048m-66.563 9.387c-.312 5.559.488 18.141 1.361 21.4.224.833-2.534-2.271-3.293-3.706-2.267-4.292-2.451-8.752-.623-15.094.476-1.652 2.605-6.696 2.734-6.477.02.033-.061 1.778-.179 3.877m29.199 15.043c12.425 1.613 20.647 12.282 17.378 22.551-2.291 7.195-8.798 9.399-17.297 5.861-6.45-2.685-11.387-8.578-14.166-16.909-2.187-6.555 5.272-12.647 14.085-11.503m106.413.558c2.499 1.293 4.276 5.311 5.707 12.909 1.905 10.108.918 15.25-3.093 16.11-4.672 1.002-7.972-5.797-8.518-17.552-.394-8.499 2.137-13.415 5.904-11.467m42.577.584c4.838 2.467 6.141 17.741 1.674 19.608-2.412 1.007-6.652-1.468-8.321-4.857-3.325-6.754 1.469-17.393 6.647-14.751m43.082 1.76c4.694 4.508 3.549 15.641-1.902 18.499-1.594.836-5.07-7.491-5.07-12.147 0-6.115 3.705-9.49 6.972-6.352m-49.054 19.292c3.215 1.741 7.11 1.827 9.886.219l.771-.447-.163.755c-2.156 9.986-11.39 10.431-12.077.582-.143-2.052-.15-2.048 1.583-1.109"
        ></path>
      </g>
    </svg>
  );
}

function Header({ user }: { user?: AppContext["user"] }) {
  return (
    <div className="px-8 py-4 flex justify-between items-center border-b">
      <a href="/">
        <Logo />
      </a>
      <div className="flex gap-2 text-sm font-semibold">
        {user ? (
          <a href={link("/user/logout")}>Logout</a>
        ) : (
          <a href={link("/user/login")}>Not logged in</a>
        )}
      </div>
    </div>
  );
}

export function Layout({
  children,
  appContext,
}: {
  children: React.ReactNode;
  appContext: AppContext;
}) {
  return (
    <div className="min-h-screen bg-white">
      <Header user={appContext?.user} />

      <main className="min-h-screen">
        <div className="max-w-7xl mx-auto py-6 sm:px-6 lg:px-8">{children}</div>
      </main>

      <div className="px-8 py-4 border-t">
        Crafted with{" "}
        <a href="https://rwsdk.com/personal-software">RedwoodSDK</a>
      </div>
    </div>
  );
}
